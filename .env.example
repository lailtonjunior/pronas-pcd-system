# =========================================================
# SISTEMA PRONAS/PCD - CONFIGURAÇÃO DE AMBIENTE
# Versão: 2.0.0 | Conformidade: 100% Ministério da Saúde
# =========================================================

# =================
# CONFIGURAÇÃO GERAL
# =================
ENVIRONMENT=production
DEBUG=false
APP_VERSION=2.0.0

# =================
# BANCO DE DADOS
# =================
DB_HOST=localhost
DB_PORT=5432
DB_NAME=pronas_pcd_db
DB_USER=pronas_user
DB_PASSWORD=PronasPCD_2024_Super_Secure_Password_Change_Me!

# URL completa do banco (gerada automaticamente)
DATABASE_URL=postgresql://${DB_USER}:${DB_PASSWORD}@${DB_HOST}:${DB_PORT}/${DB_NAME}

# Pool de conexões
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=40
DATABASE_ECHO=false

# =================
# REDIS CACHE
# =================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=PronasPCD_Redis_2024_Secure_Password!
REDIS_URL=redis://:${REDIS_PASSWORD}@${REDIS_HOST}:${REDIS_PORT}/0

# TTL Cache (segundos)
CACHE_TTL_SHORT=300     # 5 minutos
CACHE_TTL_MEDIUM=1800   # 30 minutos
CACHE_TTL_LONG=7200     # 2 horas

# =================
# SEGURANÇA & JWT
# =================
JWT_SECRET_KEY=PronasPCD_JWT_Super_Secret_Key_2024_CHANGE_IN_PRODUCTION_64_CHARACTERS!
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=480    # 8 horas
REFRESH_TOKEN_EXPIRE_DAYS=30
PASSWORD_RESET_EXPIRE_MINUTES=15

# CORS & Hosts permitidos
ALLOWED_ORIGINS=https://pronas-pcd.org,https://www.pronas-pcd.org,http://localhost:3000
ALLOWED_HOSTS=pronas-pcd.org,www.pronas-pcd.org,localhost,127.0.0.1

# Rate Limiting
RATE_LIMIT_PER_MINUTE=100
RATE_LIMIT_BURST=200

# =================
# ARMAZENAMENTO MINIO
# =================
MINIO_HOST=localhost
MINIO_API_PORT=9000
MINIO_CONSOLE_PORT=9001
MINIO_USER=pronas_minio_admin
MINIO_PASSWORD=PronasPCD_MinIO_2024_Ultra_Secure_Password!
MINIO_DOMAIN=localhost:9000
STORAGE_ENDPOINT=${MINIO_HOST}:${MINIO_API_PORT}
STORAGE_ACCESS_KEY=${MINIO_USER}
STORAGE_SECRET_KEY=${MINIO_PASSWORD}
STORAGE_BUCKET=pronas-pcd-documents
STORAGE_SECURE=false

# =================
# UPLOAD DE ARQUIVOS
# =================
MAX_FILE_SIZE_MB=100
ALLOWED_FILE_EXTENSIONS=pdf,doc,docx,xls,xlsx,jpg,jpeg,png,gif,zip,rar,7z
UPLOAD_DIRECTORY=uploads

# =================
# INTELIGÊNCIA ARTIFICIAL
# =================
AI_ENABLED=true
AI_MODEL=gpt-4-turbo-preview
AI_API_KEY=sk-your-openai-api-key-here
AI_CONFIDENCE_THRESHOLD=0.75
AI_MAX_RETRIES=3
AI_TIMEOUT_SECONDS=120

# =================
# REGRAS DE NEGÓCIO PRONAS/PCD
# =================

# Limites de projetos
MAX_PROJECTS_PER_INSTITUTION=3
SUBMISSION_PERIOD_DAYS=45

# Captação de recursos
MIN_CAPTACAO_PERCENTAGE=0.6      # 60% mínimo
MAX_CAPTACAO_PERCENTAGE=1.2      # 120% máximo
MAX_CAPTACAO_ABSOLUTE=50000      # R$ 50.000 máximo

# Cronograma
MIN_PROJECT_TIMELINE_MONTHS=6    # 6 meses mínimo
MAX_PROJECT_TIMELINE_MONTHS=48   # 48 meses máximo

# Credenciamento (apenas junho e julho)
CREDENTIALING_MONTHS=6,7

# =================
# EMAIL/SMTP
# =================
SMTP_ENABLED=true
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=noreply@pronas-pcd.org
SMTP_PASSWORD=your-app-specific-password
EMAIL_FROM=noreply@pronas-pcd.org
SMTP_USE_TLS=true

# Templates de email
EMAIL_TEMPLATE_DIR=templates/email

# =================
# APIS EXTERNAS
# =================
VIACEP_API_URL=https://viacep.com.br/ws
RECEITAWS_API_URL=https://www.receitaws.com.br/v1
API_TIMEOUT_SECONDS=30

# =================
# MONITORAMENTO
# =================
METRICS_ENABLED=true
HEALTH_CHECK_INTERVAL=30

# Prometheus
PROMETHEUS_PORT=9090

# Grafana
GRAFANA_PORT=3001
GRAFANA_USER=admin
GRAFANA_PASSWORD=PronasPCD_Grafana_2024_Admin_Password!

# =================
# LOGS
# =================
LOG_LEVEL=INFO
LOG_FILE=logs/pronas_pcd.log
LOG_MAX_SIZE=10485760    # 10MB
LOG_BACKUP_COUNT=5
LOG_FORMAT=detailed

# =================
# BACKUP
# =================
BACKUP_ENABLED=true
BACKUP_RETENTION_DAYS=30
BACKUP_SCHEDULE="0 2 * * *"    # Diário às 2h

# S3 para backup remoto (opcional)
BACKUP_S3_ENABLED=false
BACKUP_S3_BUCKET=pronas-pcd-backups
AWS_ACCESS_KEY_ID=your-aws-access-key
AWS_SECRET_ACCESS_KEY=your-aws-secret-key
AWS_REGION=us-east-1

# =================
# FRONTEND (NEXT.JS)
# =================
FRONTEND_PORT=3000
NEXT_PUBLIC_API_URL=https://api.pronas-pcd.org
NEXT_PUBLIC_APP_VERSION=2.0.0
NEXT_PUBLIC_ENVIRONMENT=${ENVIRONMENT}

# =================
# NGINX
# =================
HTTP_PORT=80
HTTPS_PORT=443
NGINX_WORKER_PROCESSES=auto
NGINX_WORKER_CONNECTIONS=1024

# =================
# USUÁRIOS PADRÃO (SOMENTE DESENVOLVIMENTO)
# REMOVER EM PRODUÇÃO!
# =================
DEFAULT_ADMIN_USERNAME=admin
DEFAULT_ADMIN_PASSWORD=PronasPCD@Admin2024!
DEFAULT_ADMIN_EMAIL=admin@pronas-pcd.org

DEFAULT_GESTOR_USERNAME=gestor
DEFAULT_GESTOR_PASSWORD=PronasPCD@Gestor2024!
DEFAULT_GESTOR_EMAIL=gestor@pronas-pcd.org

DEFAULT_AUDITOR_USERNAME=auditor
DEFAULT_AUDITOR_PASSWORD=PronasPCD@Auditor2024!
DEFAULT_AUDITOR_EMAIL=auditor@pronas-pcd.org

# =================
# SSL/TLS (PRODUÇÃO)
# =================
SSL_ENABLED=true
SSL_CERT_PATH=/etc/nginx/ssl/pronas-pcd.crt
SSL_KEY_PATH=/etc/nginx/ssl/pronas-pcd.key
SSL_DHPARAM_PATH=/etc/nginx/ssl/dhparam.pem

# =================
# RECURSOS DO SISTEMA
# =================
# Limites de memória (MB)
BACKEND_MEMORY_LIMIT=4096
FRONTEND_MEMORY_LIMIT=2048
DB_MEMORY_LIMIT=2048

# Limites de CPU (cores)
BACKEND_CPU_LIMIT=2.0
FRONTEND_CPU_LIMIT=1.0
DB_CPU_LIMIT=1.0

# =================
# DESENVOLVIMENTO/DEBUG
# =================
# Apenas para desenvolvimento - REMOVER EM PRODUÇÃO
ENABLE_CORS_ALL=false
ENABLE_DEBUG_TOOLBAR=false
SHOW_ERROR_DETAILS=false
LOG_SQL_QUERIES=false

# =================
# CONFORMIDADE LEGAL
# =================
LEGAL_COMPLIANCE_VERSION=2024.1
MINISTRY_OF_HEALTH_COMPLIANCE=true
LGPD_COMPLIANCE=true
AUDIT_ENABLED=true

# Marco legal base
PRONAS_LAW=Lei_12715_2012
CONSOLIDATION_ORDINANCE=Portaria_Consolidacao_5_2017
EXPENSE_NATURE_ORDINANCE=Portaria_448_2002
INCLUSION_LAW=Lei_13146_2015

# =================
# OBSERVAÇÕES IMPORTANTES
# =================

# 1. SEGURANÇA: 
#    - Altere TODAS as senhas antes do deploy em produção
#    - Use senhas de pelo menos 32 caracteres
#    - Nunca commite este arquivo com senhas reais

# 2. BACKUP:
#    - Configure backup automático em produção
#    - Teste a restauração regularmente
#    - Mantenha backups em local seguro

# 3. MONITORAMENTO:
#    - Configure alertas para métricas críticas
#    - Monitore uso de recursos
#    - Configure logs centralizados

# 4. PERFORMANCE:
#    - Ajuste pool de conexões conforme carga
#    - Configure cache adequadamente
#    - Monitore tempos de resposta

# 5. CONFORMIDADE:
#    - Este sistema segue 100% as diretrizes PRONAS/PCD
#    - Auditoria completa de todas as ações
#    - Logs detalhados para conformidade legal
